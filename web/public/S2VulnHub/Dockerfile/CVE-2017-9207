FROM ubuntu:14.04
RUN sed -i "s@http://.*archive.ubuntu.com@http://mirrors.ustc.edu.cn/@g" /etc/apt/sources.list
RUN sed -i "s@http://.*security.ubuntu.com@http://mirrors.ustc.edu.cn/@g" /etc/apt/sources.list
ARG DEBIAN_FRONTEND=noninteractive
RUN apt update && apt install -y iputils-ping wget git vim build-essential cmake unzip
RUN apt install -y autoconf pkg-config libpng-dev pstoedit libpstoedit-dev
WORKDIR /root
RUN git clone https://github.com/jsummers/imageworsener
WORKDIR /root/imageworsener
RUN git checkout fbfb0d477fb459eaf2f8e0868b87be0739133bef
RUN echo -n Li9zY3JpcHRzL2F1dG9nZW4uc2gKQ0ZMQUdTPSctZnNhbml0aXplPWFkZHJlc3MnIExERkxBR1M9Jy1sYXNhbicgLi9jb25maWd1cmUKbWFrZSAtag== | base64 -d > build.sh
RUN wget https://github.com/c8ef/VulPackpages/raw/main/00284-imageworsener-heapoverflow-iw_get_ui16be
RUN echo -n Li9pbWFnZXcgMDAyODQtaW1hZ2V3b3JzZW5lci1oZWFwb3ZlcmZsb3ctaXdfZ2V0X3VpMTZiZSAvdG1wL291dCAtb3V0Zm10IGJtcA== | base64 -d > poc.sh
CMD ["/bin/bash"]